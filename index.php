<?php
    $ch = curl_init();    
    curl_setopt($ch, CURLOPT_URL, "https://pvp.qq.com/web201605/js/herolist.json");    //参数为1表示传输数据，为0表示直接输出显示。  
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);  //参数为0表示不带头文件，为1表示带头文件  
    curl_setopt($ch, CURLOPT_HEADER,0);  
    $output = curl_exec($ch);   
    curl_close($ch);
    $i=0;
    $result=array();
    class Emp {
       public $amount = 0;
       public $array  = array();
   }
    foreach (json_decode($output) as $v)
    {
        $result[$i]=$v->ename;
        $i++;
    }
    $e = new Emp();
    $e->amount = $i;
    $e->array  = $result;
    echo json_encode($e);
?>
